# OSN 说明

OSN（Object Serialization Notation）是一种用于对象序列化的文本格式，旨在提供一种易于阅读、解析和生成的数据表示方式。它的设计灵感来源于JSON，但在可读性和灵活性方面进行了改进。

OSN基于 `键:值` 结构。多个键值对之间使用逗号（`,`）分隔，最后一个键值对后允许有尾随逗号。当某行只有一个键值对时，逗号可以省略。

键可是任意单行文本，如果键的文本仅包含字母、数字、下划线和横线，则可以省略包裹键的双引号（`"`），否则必须使用双引号包裹键。

值可以是数值、布尔值、字符串、数组、对象或 `null` 。


## 注释

OSN支持单行注释。注释以 `//` 开头，直到行尾，注释中的内容会被解析器忽略。注释可以出现在除多行字符串外的任何位置。


## 数据类型

### 数值

OSN支持整数和浮点数，允许使用科学记数法、二进制、八进制和十六进制表示法。数字之间可以使用下划线（`_`）作为分隔符以提高可读性。

使用科学记数法、二进制、八进制和十六进制表示法时，字母部分不区分大小写。

示例：
```js
IntegerValue: 42
FloatValue: 3.14
NumberFieldScientific: 3.14E-10
BinaryValue: 0b0010_1010
OctalValue: 0o52
HexValue: 0x2A
```


### 布尔值

OSN使用 `true` 和 `false` 作为布尔字面量，不区分大小写。

示例：
```js
BooleanValue1: true
BooleanValue2: false
```


### 字符串

OSN支持单行字符串和多行字符串。

单行字符串使用双引号（`"`）包裹，支持转义字符，规则与JSON一致（遵循RFC 8259）。

多行字符串使用三引号（`"""`）包裹，支持指定换行符，其中的所有字符都被视为字面量，不支持转义。多行字符串内容文本不能与三引号在同一行，并且每行文本必须以管道符（`|`）开始。每一行中，管道符前的所有空白字符会被忽略，管道符后的所有内容会被保留，包括其他管道符和前导/尾随空白字符。只包含一个管道符的行（可带有前导/尾随空白字符）代表一个空行。

示例：
```js
SingleLineStringField: "Hello World!",
SingleLineStringFieldWithEscape: "说：\n\"你好！\"",
MultiLineStringField: """
                    |这是一个多行字符串，可以书写多行内容。
                    |该 `"""` 区间内的所有字符都被视为字面量，不支持转义。
                    |每行内容必须以管道符 `|` 开始，以便控制缩进。
                    |下一行是空行：
                    |
                    """,
```


### 数组

OSN使用方括号（`[]`）表示数组，数组中的元素可以是任意类型的值。元素之间使用逗号（`,`）分隔，最后一个元素后允许有尾随逗号。

示例：
```js
ArrayOfIntegers: [1, 2, 3, 4, 5]
ArrayOfStrings: ["你好", "Hello"]
ArrayOfArrays: [[1, 2], [3, 4]]
```


### 对象

OSN使用花括号（`{}`）表示对象，对象内可包含任意数量的 `键:值` 结构，在编程语言中，它可以被解析为对象或字典。一个OSN文档本身即表示一个对象，文档级对象的花括号可以省略。

示例：
```js
ObjectField: {
    Field1: "Value",
    Field2: 42,
    Field3: [1, 2, 3],
    Field4: {
        SubField1: "SubValue1",
        SubField2: true
    }
}
```


### null

OSN使用 `null` 表示空对象或无值，不区分大小写。使用 `null` 表示非可空类型时，解析器应该允许指定将其解析为默认值或抛出异常。

示例：
```js
ObjectField: null
IntegerField: null // 可能被解析为0，也可能抛出异常，取决于解析器的参数
```


## 指令

OSN支持指令，指令以 `@` 符号开头，通常用于指定解析器的行为或提供元数据。指令不区分大小写。

### @omd


### @type


### @eol


### @nullable


### @notnull


### @ref


## 环境变量

OSN支持环境变量，使用 `${}` 包裹变量名。环境变量可以在OSN文件中被引用，解析器会在解析时将其替换为实际的环境变量值。

示例：
```js
EnvironmentVariable: ${GAME_VERSION}
```
